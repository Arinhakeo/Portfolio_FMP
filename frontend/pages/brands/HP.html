<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- =================================================================== -->
    <!-- Métadonnées de base -->
    <!-- =================================================================== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FMP, votre spécialiste en cartouches d'imprimantes. Large gamme de cartouches compatibles et originales pour toutes les marques.">
    <title>FMP - For My Printer | Cartouches d'imprimantes</title>

    <!-- =================================================================== -->
    <!-- Sécurité -->
    <!-- =================================================================== -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- CSP modifié pour permettre les modules et les scripts inline nécessaires -->
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' http://localhost:5000;
                script-src 'self' 'unsafe-inline' 'unsafe-eval';
                style-src 'self' 'unsafe-inline';
                img-src 'self' data:;">

    <!-- =================================================================== -->
    <!-- Styles -->
    <!-- =================================================================== -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/home.css">

    <!-- =================================================================== -->
    <!-- Scripts principaux - Chargés en tant que modules -->
    <!-- =================================================================== -->
    <script type="module" src="/static/js/config.js"></script>
    <script type="module" src="/static/js/session.js"></script>
    <script type="module" src="/static/js/auth.js"></script>
    <script type="module" src="/static/js/main.js"></script>
    <script src="/static/js/home.js"></script>
</head>
<body>
    <!-- =================================================================== -->
    <!-- En-tête -->
    <!-- =================================================================== -->
    <header class="main-header">
        <!-- Barre supérieure -->
        <div class="top-bar">
            <div class="container">
                <!-- Navigation principale -->
                <nav class="main-nav">
                    <div class="container">
                        <!-- Logo -->
                        <div class="logo">
                            <a href="/">
                                <img src="/static/images/banners/logo_FMP.jpg" alt="FMP Logo">
                            </a>
                        </div>

                        <!-- Barre de recherche -->
                        <div class="search-bar">
                            <form id="search-form">
                                <input type="text"
                                    id="search-input"
                                    name="q"
                                    placeholder="Rechercher une cartouche..."
                                    autocomplete="off">
                                <button type="submit">
                                    <img src="/static/images/icones/chercher.png" alt="Rechercher">
                                </button>
                            </form>
                        </div>

                            <!-- User Navigation -->
                <!-- Liens de connexion et d'inscription (visibles uniquement si l'utilisateur n'est pas connecté) -->
                <div id="auth-container">
                    <a href="/login" id="login-link" class="auth-link">
                        Connexion
                    </a>
                    <a href="/register" id="register-link" class="auth-link">
                        Inscription
                    </a>
                </div>

                <!-- Menu utilisateur (visible uniquement si l'utilisateur est connecté) -->
                <div id="user-nav" class="user-nav" style="display: none;">
                    <a href="/pages/profile.html">
                    <button id="profile-button" class="nav-button">
                        <img src="/static/images/icones/user.png" class="user-icon">
                        <div class="profile-text">
                            <span class="profile-label">Mon Compte</span>
                            <span class="username">Nom d'utilisateur</span>
                        </div>
                    </button>
                    </a>
                    <button id="logout-button" class="nav-button" onclick="mainManager.handleLogout()">
                        Déconnexion
                    </button>
                </div>

                        <!-- Panier -->
                        <div class="cart-widget">
                            <a href="/cart" class="cart-link">
                                <span class="cart-count" id="cart-count">0</span>
                                <span class="cart-total" id="cart-total">0,00 €</span>
                                <img src="/static/images/icones/caddie.png" alt="Caddie" class="caddie-icon">
                            </a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </header>
